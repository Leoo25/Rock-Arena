{% extends 'base.html' %}
{% load static %}
{% block title %}P√°gina Inicial{% endblock %}
{% block nav_class %}fixed-top navbar-dark navbar-transparent{% endblock %}
{% block main_class %}p-0 m-0{% endblock %}
{% block content %}
<section id="home" class="p-5 text-white">
<div class="hero-overlay"></div>
<div class="container d-flex align-items-center justify-content-center position-relative" style="min-height: 100vh; z-index: 2;">
<div class="col-lg-8 text-center mt-5">                
<h1 class="display-1 fw-bold text-uppercase mb-3 rock-title-border">Rock Arena</h1>
<h2 class="mb-4 text-white" style="text-shadow: 2px 2px 4px #000; font-family: 'Metal Mania', cursive; letter-spacing: 2px;">
    Loja de Instrumentos
</h2>
{% if pagina %}
    <p class="lead mb-4 fs-4 fw-bold">
        {{ pagina.texto_chamada|linebreaksbr }}
    </p>
{% else %}
    <p class="lead mb-4">Bem-vindo √† casa do Rock! Cadastre o conte√∫do no Admin.</p>
{% endif %}
{% if not user.is_authenticated %}
    <a href="{% url 'cadastro' %}" class="btn btn-outline-danger btn-lg px-5 fw-bold mt-3 rounded-pill shadow-lg border-2">
        Junte-se √† Banda
    </a>
{% else %}
    <a href="#produtos" class="btn btn-danger btn-lg px-5 fw-bold mt-3 rounded-pill shadow-lg">
        Ver Equipamentos
    </a>
{% endif %}
</div>
</div>
</section>
<section id="sobre" class="py-5" style="background-color: #111; position: relative; z-index: 2;">
<div class="container">
<h2 class="text-center mb-5 display-5">Quem Somos</h2>
{% if pagina %}
<div class="row align-items-center">
<div class="col-md-6 mb-4 mb-md-0">
    <div class="p-4 rounded border border-dark" style="background: linear-gradient(45deg, #1a1a1a, #0d0d0d);">
        <p class="lead text-light mb-0">
            {{ pagina.texto_sobre|linebreaksbr }}
        </p>
    </div>
</div>
<div class="col-md-6 text-center">
    {% if pagina.imagem_sobre %}
        <img src="{{ pagina.imagem_sobre.url }}" class="img-fluid rounded shadow-lg border border-danger" alt="Sobre a Rock Arena" style="max-height: 400px; box-shadow: 0 0 15px rgba(255,0,0,0.2);">
    {% else %}
        <div class="alert alert-dark">Imagem n√£o cadastrada.</div>
    {% endif %}
</div>
</div>
{% else %}
<div class="alert alert-warning text-center bg-dark text-warning border-warning">
Ainda n√£o h√° conte√∫do "Sobre N√≥s" cadastrado no painel Admin.
</div>
{% endif %}
</div>
</section>
<section id="produtos" class="py-5 bg-black" style="position: relative; z-index: 2;">
<div class="container">
<h2 class="text-center mb-5 display-5">Nosso Arsenal</h2>
<div class="row justify-content-center g-4">
{% for produto in produtos %}
<div class="col-lg-3 col-md-6">
    <div class="card card-rock h-100">
        <div class="bg-white rounded-top p-2 d-flex align-items-center justify-content-center" style="height: 200px;">
            <img src="{{ produto.foto.url }}" class="img-fluid" alt="{{ produto.nome }}" style="max-height: 180px; object-fit: contain;">
        </div>
        
        <div class="card-body d-flex flex-column text-start">
            <h5 class="card-title fs-4" style="font-family: 'Metal Mania', cursive;">{{ produto.nome }}</h5>
            <p class="card-text text-secondary small flex-grow-1">
                {{ produto.descricao|truncatechars:60 }}
            </p>
            <hr class="border-secondary">
            <p class="fs-3 fw-bold text-danger mb-3">R$ {{ produto.preco|floatformat:2 }}</p> 
            
            {% if user.is_authenticated %}
                <a href="{% url 'compra' produto.id %}" class="btn btn-danger w-100 fw-bold">COMPRAR AGORA</a>
            {% else %}
                <button class="btn btn-outline-secondary w-100" disabled>Login para Comprar</button>
            {% endif %}
        </div>
    </div>
</div>
{% empty %}
<div class="col-12 text-center text-muted">
    <p class="lead">O estoque foi saqueado! (Nenhum produto cadastrado)</p>
</div>
{% endfor %}
</div>
</div>
</section>
<section id="contato" class="py-5" style="background-color: #151515; border-top: 2px solid #333; position: relative; z-index: 2;">
<div class="container">
<h2 class="text-center mb-5 display-5">Fale com a Produ√ß√£o</h2>
<div class="row">
<div class="col-md-5 mb-5 text-light">
    <div class="p-4 rounded h-100" style="background-color: #000; border-left: 4px solid var(--rock-red);">
        <h3 class="mb-4">Canais Oficiais</h3>
        <div class="mb-4">
            <h5 class="text-danger">üìç Base de Opera√ß√µes</h5>
            <p class="mb-0">{{ pagina.endereco|default:"Endere√ßo n√£o cadastrado no Admin" }}</p>
        </div>
        <div class="mb-4">
            <h5 class="text-danger">üì± Hotline (WhatsApp)</h5>
            <p class="mb-0">{{ pagina.whatsapp|default:"(XX) XXXXX-XXXX" }}</p>
        </div>
        <div>
            <h5 class="text-danger">‚úâÔ∏è E-mail</h5>
            <p class="mb-0">{{ pagina.email|default:"contato@rockarena.com" }}</p>
        </div>
    </div>
</div>
<div class="col-md-7">
    <div class="p-4 rounded border border-dark" style="background-color: #0d0d0d;">
        <h3 class="mb-4 text-white">Envie sua Mensagem</h3>
        <form method="post" action="{% url 'index' %}">
            {% csrf_token %}
            {% for field in form_contato %}
                <div class="mb-3">
                    <label for="{{ field.id_for_label }}" class="form-label fw-bold">{{ field.label }}</label>
                    {{ field }}
                    {% if field.errors %}
                        <div class="text-danger small mt-1">{{ field.errors }}</div>
                    {% endif %}
                </div>
            {% endfor %}
            <div class="d-grid mt-4">
                <button type="submit" class="btn btn-danger btn-lg fw-bold text-uppercase shadow">Enviar Mensagem ü§ò</button>
            </div>
        </form>
    </div>
</div>
</div>
</div>
</section>

{% endblock content %}