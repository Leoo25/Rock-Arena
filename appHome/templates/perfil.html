{% extends 'base.html' %}
{% load static %}
{% block title %}Meu Histórico{% endblock %}
{% block main_class %}p-0 m-0{% endblock %}
{% block content %}
<div class="auth-bg" style="min-height: 90vh; align-items: flex-start; padding-top: 100px;">
<div class="container">
<div class="row justify-content-center">
<div class="col-lg-10">

<div class="d-flex justify-content-between align-items-center mb-4">
<h2 class="text-white m-0" style="font-family: 'Metal Mania', cursive; font-size: 3rem; text-shadow: 2px 2px 0 #dc3545;">
Histórico de Pedidos
</h2>
<span class="badge bg-danger fs-6">{{ user.username }}</span>
</div>

<div class="card card-auth p-0 border-0 shadow-lg" style="background-color: #111; max-width: 100%;">
<div class="card-body p-0">
{% if pedidos %}
<div class="table-responsive">
<table class="table table-dark table-hover mb-0" style="border-collapse: separate; border-spacing: 0;">
<thead>
    <tr style="border-bottom: 2px solid var(--rock-red);">
        <th class="p-3 text-danger text-uppercase">Produto</th>
        <th class="p-3 text-danger text-uppercase text-center">Qtd</th>
        <th class="p-3 text-danger text-uppercase text-end">Total</th>
        <th class="p-3 text-danger text-uppercase text-end">Data</th>
    </tr>
</thead>
<tbody>
    {% for pedido in pedidos %}
    <tr style="border-bottom: 1px solid #333;">
        <td class="p-3 align-middle fw-bold text-white">{{ pedido.produto.nome }}</td>
        <td class="p-3 align-middle text-center text-muted">{{ pedido.quantidade }}</td>
        <td class="p-3 align-middle text-end text-success fw-bold">R$ {{ pedido.total|floatformat:2 }}</td>
        <td class="p-3 align-middle text-end text-secondary small">{{ pedido.data|date:"d/m/Y H:i" }}</td> 
    </tr>
    {% endfor %}
</tbody>
</table>
</div>
{% else %}
<div class="p-5 text-center">
<h3 class="text-muted mb-3" style="font-family: 'New Rocker', cursive;">Silêncio total...</h3>
<p class="text-secondary">Você ainda não adquiriu nenhum equipamento.</p>
<a href="{% url 'index' %}#produtos" class="btn btn-outline-danger mt-3">Ir para a Loja</a>
</div>
{% endif %}
</div>
</div>

<div class="text-center mt-4">
<a href="{% url 'index' %}" class="text-secondary text-decoration-none">
<i class="bi bi-arrow-left"></i> Voltar para o Palco Principal
</a>
</div>
</div>
</div>
</div>
</div>
{% endblock content %}